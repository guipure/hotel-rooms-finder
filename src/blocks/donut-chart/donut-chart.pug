mixin donut-chart(score)
    -
        const radius = '58'
        const sum = Object.values(score).reduce((acc, val) => acc + val)

        const badDash = makeDash(score.bad, sum)
        const normalDash = makeDash(score.normal, sum)
        const goodDash = makeDash(score.good, sum)
        const greatDash = makeDash(score.great, sum)

        const badOffset = (2 * Math.PI * radius * 0.25).toString()
        const normalOffset = makeOffset(badDash, badOffset)
        const goodOffset = makeOffset(normalDash, normalOffset)
        const greatOffset = makeOffset(goodDash, goodOffset)


        function makeDash(val, total) {
            const circLength = 2 * Math.PI * radius
            const ratio = Math.round(circLength * val / total)
            const remain = circLength - ratio
            return ratio.toString() + ' ' + remain.toString()
        }


        function makeOffset(prevDash, prevOffset) {
            const prevDashNum = Number(prevDash.split(' ')[0])
            const prevOffsetNum = Number(prevOffset)
            const offset = prevOffsetNum - prevDashNum
            return offset.toString()
        }

    figure.donut-chart
        .donut-chart__donut
            svg.donut(width="100%" height="100%" viewBox="0 0 120 120")
                defs
                    linearGradient(id="yellow-gradient" x1="0%" y1="0%" x2="0%" y2="100%")
                        stop(offset="0%" stop-color="#FFE39C")
                        stop(offset="100%" stop-color="#FFBA9C")
                    linearGradient(id="purple-gradient" x1="0%" y1="0%" x2="0%" y2="100%")
                        stop(offset="0%" stop-color="#BC9CFF")
                        stop(offset="100%" stop-color="#8BA4F9")
                    linearGradient(id="green-gradient" x1="0%" y1="0%" x2="0%" y2="100%")
                        stop(offset="0%" stop-color="#6FCF97")
                        stop(offset="100%" stop-color="#66D2EA")
                    linearGradient(id="grey-gradient" x1="0%" y1="0%" x2="0%" y2="100%")
                        stop(offset="0%" stop-color="#909090")
                        stop(offset="100%" stop-color="#3D4975")
                circle.donut__hole(cx="60" cy="60" r=radius fill="#fff")
                
                circle.donut__segment(cx="60" cy="60" r=radius fill="transparent", stroke="url(#grey-gradient)" stroke-width="4" stroke-dasharray=badDash stroke-dashoffset=badOffset)
                circle.donut__segment(cx="60" cy="60" r=radius fill="transparent", stroke="url(#purple-gradient)" stroke-width="4" stroke-dasharray=normalDash stroke-dashoffset=normalOffset)
                circle.donut__segment(cx="60" cy="60" r=radius fill="transparent", stroke="url(#green-gradient)" stroke-width="4" stroke-dasharray=goodDash stroke-dashoffset=goodOffset)
                circle.donut__segment(cx="60" cy="60" r=radius fill="transparent", stroke="url(#yellow-gradient)" stroke-width="4" stroke-dasharray=greatDash stroke-dashoffset=greatOffset)

                g.donut__text
                    text.donut__number(x="50%" y="50%")=sum
                    text.donut__label(x="50%" y="50%") голосов
        figcaption.donut-chart__key
            ul.key__list
                li.key__item
                    span.key__circle.key__circle_yellow
                    | Великолепно
                li.key__item
                    span.key__circle.key__circle_green
                    | Хорошо
                li.key__item
                    span.key__circle.key__circle_purple
                    | Удовлетворительно
                li.key__item
                    span.key__circle.key__circle_grey
                    | Разочарован